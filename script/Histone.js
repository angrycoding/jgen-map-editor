(function(f,E,z){var t;"function"===typeof requirejs&&"function"===typeof define&&define.amd&&(t=document.head.getElementsByTagName("script"),t=Array.prototype.pop.call(t),t=t.hasAttribute("data-requiremodule"));t?define(f):"object"===typeof process||"object"===typeof Packages&&"function"===typeof JavaImporter&&"undefined"!==typeof module&&z.module.id!==module.id?module.exports=f():z[E]=f()})(function(){var f,E=function(a){var a=a.split("/"),b=""===a[0],c=[],d="";for(b&&a.shift();a.length;)d=a.shift(),".."===d?c.pop():"."!==d&&c.push(d);b&&c.unshift("");("."===d||".."===d)&&c.push("");return c.join("/")},z=function(a){return"string"===typeof a},t=function(a){return a instanceof Array},S=function(a){return a instanceof Object},T=function(a){a=a.match(fb);return{scheme:a[1]||"",authority:a[2]||"",path:a[3]||"",query:a[4]||"",fragment:a[5]||""}},oa=function(){return null!==A?A:"object"===typeof process&&(A="node")||"object"===typeof Packages&&"function"===typeof JavaImporter&&(A="rhino")||"undefined"!==typeof window&&(A="browser")||(A="unknown")},pa=0,qa=0,A=null,F=null,gb=/^(.*)\//,fb=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;f={T_UNDEFINED:1,T_NULL:2,T_BOOLEAN:3,T_NUMBER:4,T_STRING:5,T_FUNCTION:6,T_ARRAY:7,T_OBJECT:8,isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isBoolean:function(a){return"boolean"===typeof a},isNumber:function(a){return"number"===typeof a},isString:z,isArray:t,isObject:S,isFunction:function(a){return a instanceof Function},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isDOMElement:function(a){try{return a instanceof HTMLElement}catch(b){return"object"===typeof a&&1===a.nodeType}},getBaseType:function(a){if(null===a)return 2;if(a instanceof Array)return 7;switch(typeof a){case "undefined":return 1;case "boolean":return 3;case "number":return 4;case "string":return 5;case "function":return 6;case "object":return 8}},uniqueId:function(a){z(a)||(a="");var b=(new Date).getTime();b>pa?qa=0:b+=++qa;pa=b;return a+b.toString(36)+(1+Math.floor(32767*Math.random())).toString(36)+(1+Math.floor(32767*Math.random())).toString(36)},getEnvType:oa,getEnvInfo:function(){if(null!==F)return F;var a=oa();if("node"===a)return F=process.versions;if("browser"===a)return F=window.navigator.userAgent;if("rhino"===a)return a=java.lang.System,F={"os.arch":""+a.getProperty("os.arch"),"os.name":""+a.getProperty("os.name"),"os.version":""+a.getProperty("os.version"),"java.vendor":""+a.getProperty("java.vendor"),"java.version":""+a.getProperty("java.version"),"java.vendor.url":""+a.getProperty("java.vendor.url")}},forEachAsync:function(a,b,c){a instanceof Object||c();var d,i,e,f,g=-1,k=0,h=!1;a instanceof Array?e=a.length:(d=Object.keys(a),e=d.length);f=e-1;var l=function(){k+=1;if(!h){for(h=!0;0<k;){k-=1;g+=1;if(g===e)return c();i=d?d[g]:g;b(a[i],function(a){!0===a?c():l()},i,g,f)}h=!1}};l()},objectFlatten:function(a){function b(a,b){if(S(b))d.push(a),c(b),d.pop();else{var a=d.concat(a),e=a.shift();a.length&&(e=e+"["+a.join("]["),e+="]");i[e]=b}}function c(a){if(t(a))for(var c=0;c<a.length;c++)b(c,a[c]);else if(S(a))for(c in a)a.hasOwnProperty(c)&&b(c,a[c]);else return a}var d=[],i={};c(a);return i},uri:{parse:T,resolve:function(a,b,c){var a=T(a),b=T(b),d="",i="";if(a.scheme){d+=a.scheme+":";if(i=a.authority)d+="//"+i;if(i=E(a.path))d+=i;if(i=a.query)d+="?"+i}else{if(i=b.scheme)d+=i+":";if(i=a.authority){d+="//"+i;if(i=E(a.path||""))d+=i;if(i=a.query)d+="?"+i}else{if(i=b.authority)d+="//"+i;if(i=a.path){if(i=E("/"===i.charAt(0)?i:(b.authority&&!b.path?"/":(b.path.match(gb)||[""])[0])+i))d+=i;if(i=a.query)d+="?"+i}else{if(i=b.path)d+=i;if((i=a.query)||(i=b.query))d+="?"+i}}}c&&(d+=c);if(i=a.fragment)d+="#"+i;return d},parseQuery:function(a){var b={};if(!z(a))return{};for(var a=a.split("&"),c,d=a.length,i=0;i<d;i++)c=a[i].split("=",2),b[c[0]]=c[1];return b}}};var C,sa=-1,U=0,ta=2,ua=3,V=function(){function a(){if(h!==k)if(r=f[p],q=r[0].exec(g)){v=q.length;for(s=1;s<v;s++)if(G=q[s]){B=q.index;if(x=B-h)m=l.push({type:U,pos:h,value:g.substr(h,x)}),h+=x;x=G.length;h=B+x;u=r[1][s-1];switch(u[0]){case ta:m=l.push({type:u[1],pos:B,value:G});break;case ua:m=l.push({type:u[1],pos:B,len:x});break;default:a()}break}}else{if(x=k-h)m=l.push({type:U,pos:h,value:g.substr(h,x)}),h+=x}else m=l.push({type:sa,value:"EOF",pos:k})}function b(){m||a();m--;n=l.shift();o=n.type;if(i.hasOwnProperty(o)){var b=i[o];p!==b&&(f[b][0].lastIndex=f[p][0].lastIndex,p=b)}}function c(a,b,c){"object"!==typeof a&&(a=[a]);void 0===c&&(c=0);e[c]||(e[c]=[]);f[c]||(f[c]=[[],[]]);d++;e[c].push("("+a.join("|")+")");f[c][1].push([b,d]);return d}var d=0,i={},e={},f={},g,k,h,l,m,n,o,p,q,v,s,B,G,x,r,u;this.addToken=function(a,b){return c(a,ta,b)};this.addLiteral=function(a,b){return c(a,ua,b)};this.addIgnore=function(a,b){return c(a,1,b)};this.tokenize=function(a,c){h=0;l=[];m=0;o=n=null;g=a;k=a.length;void 0===c&&(c=0);p=c;for(c in f)f[c][0]=RegExp(e[c].join("|"),"g");b()};this.addTransition=function(a,b){void 0===b&&(b=0);i[a]=b};this.getLineNumber=function(){for(var a=-1,b=1,c,d=n.pos;++a<d;)c=g.charCodeAt(a),(10===c||13===c)&&b++;return b};this.getFragment=function(){return n.value?n.value:g.substr(n.pos,n.len)};this.test=function(a){return n.type===a};this.next=function(a){if(void 0===a||this.test(a))return a=n,b(),a}};V.T_EOF=sa;V.T_FRAGMENT=U;C=V;var h,wa=function(a){a=a.slice(1,-1);return a.replace(va||(va=RegExp("\\\\(t|b|n|r|f|'|\"|\\\\|\\x[0-9A-F]{2}|\\u[0-9A-F]{4})","g")),function(a,c){switch(c[0]){case "'":return"'";case '"':return'"';case "\\":return"\\";case "b":return String.fromCharCode(8);case "t":return String.fromCharCode(9);case "n":return String.fromCharCode(10);case "f":return String.fromCharCode(12);case "r":return String.fromCharCode(13);case "u":return String.fromCharCode(parseInt(c.substr(1),16));case "x":return String.fromCharCode(parseInt(c.substr(1),16))}})},e,va,W,M,X,N,Y,n,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Z,Ia,$,aa,H,ba,Ja,ca,da,Ka,La,Ma,Na,Oa,Pa,Qa,ea,I,K,y,Ra,Sa,O,L,Ta,fa,ga,Ua,p,ha,w,g=function(){function a(a,b){var b=b||e.getFragment(),c=e.getLineNumber(),d=t+"("+c+') Syntax error, "'+a+'" expected, but "'+b+'" found';return{file:t,line:c,expected:a,found:b,toString:function(){return d}}}function b(){if(e.next(Ca))return[g.T_NULL];if(e.next(Ga))return[g.T_TRUE];if(e.next(Ha))return[g.T_FALSE];if(e.test(La)){var b=e.next(),b=parseInt(b.value,10);return[g.T_INT,b]}if(e.test(Ka))return b=e.next(),b=parseFloat(b.value,10),[g.T_DOUBLE,b];if(e.test(ha))return b=e.next(),b=wa(b.value),[g.T_STRING,b];if(e.next(ea)){var b=[],c,d;if(!e.test(I))for(;;){c=null;d=k();if(e.next(O)){if(d[0]!==g.T_STRING&&d[0]!==g.T_INT&&(d[0]!==g.T_SELECTOR||1!==d[1].length))throw new a("identifier, string, number");c=d[0]!==g.T_SELECTOR?""+d[1]:""+d[1][0];d=k()}b.push([c,d]);if(!e.next(L))break}if(!e.next(I))throw new a("]");return[g.T_MAP,b]}if(e.test(w))return b=e.next(),[g.T_SELECTOR,[b.value]];if(e.next(Da))return[g.T_SELECTOR,["this"]];if(e.next(Ea))return[g.T_SELECTOR,["self"]];if(e.next(Fa))return[g.T_SELECTOR,["global"]];if(e.next(K)){if(e.next(y))throw new a("expression","()");try{b=k()}finally{if(!e.next(y))throw new a(")");}return b}throw new a("expression");}function c(){var d;if(!(d=e.next(Aa)&&[g.T_NOT,c()])){e.next(fa);for(d=e.next(ga)?[g.T_NEGATE,b()]:b();;)if(e.next(Ta)){if(!e.test(w))throw new a("identifier");d[0]!==g.T_SELECTOR&&(d=[g.T_SELECTOR,[d]]);d[1].push(e.next().value)}else if(e.next(ea)){if(e.next(I))throw new a("expression","[]");d[0]!==g.T_SELECTOR&&(d=[g.T_SELECTOR,[d]]);d[1].push(k());if(!e.next(I))throw new a("]");}else if(d[0]===g.T_SELECTOR&&e.next(K)){var i=null,f;if(!e.next(y)){for(i=[];!(i.push(k()),!e.next(L)););if(!e.next(y))throw new a(")");}f=d[1].pop();d=[g.T_CALL,d[1].length?d:null,f,i]}else break}return d}function d(){for(var a=c();e.next(Ua)&&(a=[g.T_MUL,a,c()])||e.next(p)&&(a=[g.T_DIV,a,c()])||e.next(Ba)&&(a=[g.T_MOD,a,c()]););return a}function i(){for(var a=d();e.next(fa)&&(a=[g.T_ADD,a,d()])||e.next(ga)&&(a=[g.T_SUB,a,d()]););return a}function f(){var a=i();return e.next(Na)&&[g.T_LESS_OR_EQUAL,a,i()]||e.next(Pa)&&[g.T_LESS_THAN,a,i()]||e.next(Oa)&&[g.T_GREATER_OR_EQUAL,a,i()]||e.next(Qa)&&[g.T_GREATER_THAN,a,i()]||a}function ra(){for(var a=f();e.next(xa)&&(a=[g.T_EQUAL,a,f()])||e.next(Ma)&&(a=[g.T_NOT_EQUAL,a,f()]););return a}function h(){for(var a=ra();e.next(za)&&(a=[g.T_AND,a,ra()]););return a}function k(){var a;for(a=h();e.next(ya)&&(a=[g.T_OR,a,h()]););for(;e.next(Ra);)a=[g.T_TERNARY,a,k()],e.next(O)&&a.push(k());return a}function l(){if(e.next(ca)){var b=e.next(w);if(!b)throw new a("identifier");var c;if(e.next(Sa)){if(c=k(),!e.next(n))throw new a("}}");}else{if(!e.next(n))throw new a("}}");c=[g.T_STATEMENTS,v(p)];if(!e.next(p)||!e.next(ca)||!e.next(n))throw new a("{{/var}}");}return[g.T_VAR,b.value,c]}}function m(){if(e.next($)){for(var b=[],c,d;;){c=k();if(!e.next(n))throw new a("}}");d=v(p,H,aa);b.push([c,d]);if(!e.next(aa))break}if(e.next(H)){if(!e.next(n))throw new a("}}");d=v(p);b.push([[g.T_TRUE],d])}if(!e.next(p)||!e.next($)||!e.next(n))throw new a("{{/if}}");return[g.T_IF,b]}}function o(){if(e.next(ba)){var b=e.next(w);if(!b)throw new a("identifier");b=[b.value];if(e.next(O)){var c=e.next(w);if(!c)throw new a("identifier");b.unshift(c.value)}if(!e.next(Ja))throw new a("in");c=k();if(!e.next(n))throw new a("}}");var d=[v(p,H)];if(e.next(H)){if(!e.next(n))throw new a("}}");d.push(v(p))}if(!e.next(p)||!e.next(ba)||!e.next(n))throw new a("{{/for}}");return[g.T_FOR,b,c,d]}}function q(){if(e.next(da)){var b=e.next(w);if(!b)throw new a("identifier");var c=[];if(e.next(K)&&!e.next(y)){for(;;){var d=e.next(w);if(!d)throw new a("identifier");c.push(d.value);if(!e.next(L))break}if(!e.next(y))throw new a(")");}if(!e.next(n))throw new a("}}");d=v(p);if(!e.next(p)||!e.next(da)||!e.next(n))throw new a("{{/macro}}");return[g.T_MACRO,b.value,c,d]}}function s(){if(e.next(Z)){var b=e.next(w);if(!b)throw new a("identifier");var c=[];if(e.next(K)&&
!e.next(y)){for(;!(c.push(k()),!e.next(L)););if(!e.next(y))throw new a(")");}if(!e.next(n))throw new a("}}");c.push([g.T_STATEMENTS,v(p)]);if(!e.next(p)||!e.next(Z)||!e.next(n))throw new a("{{/call}}");return[g.T_CALL,null,b.value,c]}}function u(){if(e.next(Ia)){var b=e.next(ha);if(!b)throw new a("string");b=wa(b.value);if(!e.next(n))throw new a("}}");return[g.T_IMPORT,b]}}function r(){var b=k();if(!e.next(n))throw new a("}}");return b}function v(){for(var b=[];!e.next(C.T_EOF);){for(;e.next(W);){for(;!e.test(M)&&!e.next(C.T_EOF);)e.next();if(!e.next(M))throw new a("*}}");}for(;e.next(X);){for(var c="";!e.test(N)&&!e.next(C.T_EOF);)c+=e.next().value;if(!e.next(N))throw new a("%}}");b.push(c)}if(e.next(Y)){if(c=Array.prototype.slice.call(arguments)){for(var d=!1;c.length;)if(e.test(c.shift())){d=!0;break}if(d)break}e.next(n)||b.push(m()||o()||l()||q()||s()||u()||r())}else e.test(C.T_FRAGMENT)&&b.push(e.next().value)}return b}var t;this.parse=function(a,b){t=b||"template";e||(e=new C,W=e.addLiteral("{{\\*",0),M=e.addLiteral("\\*}}",2),X=e.addLiteral("{{%",0),N=e.addLiteral("%}}",3),Y=e.addLiteral("{{",0),n=e.addLiteral("}}",1),xa=e.addLiteral("is\\b",1),ya=e.addLiteral("or\\b",1),za=e.addLiteral("and\\b",1),Aa=e.addLiteral("not\\b",1),Ba=e.addLiteral("mod\\b",1),Da=e.addLiteral("this\\b",1),Ea=e.addLiteral("self\\b",1),Fa=e.addLiteral("global\\b",1),Ca=e.addLiteral("null\\b",1),Ga=e.addLiteral("true\\b",1),Ha=e.addLiteral("false\\b",1),Z=e.addLiteral("call\\b",1),Ia=e.addLiteral("import\\b",1),$=e.addLiteral("if\\b",1),aa=e.addLiteral("elseif\\b",1),H=e.addLiteral("else\\b",1),ba=e.addLiteral("for\\b",1),Ja=e.addLiteral("in\\b",1),ca=e.addLiteral("var\\b",1),da=e.addLiteral("macro\\b",1),Ka=e.addToken(["(?:[0-9]*\\.)?[0-9]+[eE][\\+\\-]?[0-9]+","[0-9]*\\.[0-9]+"],1),La=e.addToken("[0-9]+",1),Ma=e.addLiteral("isNot\\b",1),Na=e.addLiteral("<=",1),Oa=e.addLiteral(">=",1),Pa=e.addLiteral("<",1),Qa=e.addLiteral(">",1),ea=e.addLiteral("\\[",1),I=e.addLiteral("\\]",1),K=e.addLiteral("\\(",1),y=e.addLiteral("\\)",1),Ra=e.addLiteral("\\?",1),Sa=e.addLiteral("=",1),O=e.addLiteral(":",1),L=e.addLiteral(",",1),Ta=e.addLiteral("\\.",1),fa=e.addLiteral("\\+",1),ga=e.addLiteral("\\-",1),Ua=e.addLiteral("\\*",1),p=e.addLiteral("\\/",1),ha=e.addToken(["'(?:[^'\\\\]|\\\\.)*'",'"(?:[^"\\\\]|\\\\.)*"'],1),w=e.addToken("[a-zA-Z_$][a-zA-Z0-9_$]*",1),e.addIgnore("[\t\n\r ]+",1),e.addTransition(W,2),e.addTransition(M,0),e.addTransition(X,3),e.addTransition(N,0),e.addTransition(Y,1),e.addTransition(n,0));e.tokenize(a,0);return[["HISTONE"],v()]}};g.T_OR=1;g.T_AND=2;g.T_EQUAL=3;g.T_NOT_EQUAL=4;g.T_LESS_OR_EQUAL=5;g.T_LESS_THAN=6;g.T_GREATER_OR_EQUAL=7;g.T_GREATER_THAN=8;g.T_ADD=9;g.T_SUB=10;g.T_MUL=11;g.T_DIV=12;g.T_MOD=13;g.T_NEGATE=14;g.T_NOT=15;g.T_TRUE=16;g.T_FALSE=17;g.T_NULL=100;g.T_INT=101;g.T_DOUBLE=102;g.T_STRING=103;g.T_TERNARY=104;g.T_SELECTOR=105;g.T_CALL=106;g.T_MAP=107;g.T_STATEMENTS=109;g.T_IMPORT=110;g.T_IF=1E3;g.T_VAR=1001;g.T_FOR=1002;g.T_MACRO=1003;h=g;var r=function(a){this.baseURI="";this.vars=[{}];this.macros=[{}];this.stackPointer=0;this.context=a};r.prototype.setBaseURI=function(a){this.baseURI=a};r.prototype.getBaseURI=function(){return this.baseURI};r.prototype.putVar=function(a,b){this.vars[this.stackPointer][a]=b};r.prototype.getVar=function(a,b){var c=this.vars,d,i=this.stackPointer;do if(d=c[i],d.hasOwnProperty(a))return b(d[a],!0);while(i--);b()};r.prototype.putMacro=function(a,b,c,d){this.macros[this.stackPointer][a]=[b,c,d]};r.prototype.getMacro=function(a){var b=this.macros,c,d=this.stackPointer;do if(c=b[d],c.hasOwnProperty(a))return c[a];while(d--)};r.prototype.save=function(){this.vars.push({});this.macros.push({});this.stackPointer++};r.prototype.restore=function(){this.vars.pop();this.macros.pop();this.stackPointer--};var o,P=function(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);void 0===c&&(c=0);0>c&&(c+=a.length);0>c&&(c=0);for(var d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1},Va=function(){var a=-1,b=[],c=[];this.concat=function(d){if(!(d instanceof this.constructor))return this;a=0;for(var i=[],e=[],g=d.keys(),d=d.values(),h=0;h<c.length;h++){var k=b[h];f.isNumeric(k)?i.push(a++):i.push(k);e.push(c[h])}for(h=0;h<d.length;h++)k=g[h],f.isNumeric(k)?i.push(a++):i.push(k),e.push(d[h]);a--;b=i;c=e;return this};this.length=function(){return c.length};this.keys=function(){return b};this.values=function(){return c};this.hasKey=function(a){return!f.isString(a)&&!f.isNumber(a)?!1:-1!==P(b,""+a)};this.join=function(a){f.isString(a)||(a="");return c.join(a)};this.get=function(a){if(f.isString(a)||f.isNumber(a))return a=P(b,""+a),-1===a?void 0:c[a]};this.set=function(d,i){if(f.isString(d)||f.isNumber(d)){var d=""+d,e=P(b,d);-1===e?(f.isNumeric(d)&&d>a&&(a=parseInt(d)),b.push(d),c.push(i)):c[e]=i}else d=""+ ++a,b.push(d),c.push(i);return this};this.remove=function(a){if(!f.isString(a)&&!f.isNumber(a))return this;a=P(b,""+a);if(-1===a)return this;b.splice(a,1);c.splice(a,1);return this};this.clone=function(){var a,i,e,f=b.length,g=new Va;for(e=0;e<f;e++)a=b[e],i=c[e],g.set(a,i);return g};this.slice=function(a,e){var j=c.length;f.isNumber(a)||(a=0);0>a&&(a=j+a);0>a&&(a=0);if(a>=j)return b=[],c=[],this;f.isNumber(e)||(e=0);0===e&&(e=j-a);0>e&&(e=j-a+e);if(0>=e)return b=[],c=[],this;b=b.slice(a,a+e);c=c.slice(a,a+e);return this};this.toObject=function(){var a,e=b.length,j,g,h=0,k=!0;for(j=0;j<e;j++){g=b[j];if(!f.isNumeric(g)||h!==parseInt(g)){k=!1;break}h++}a=k?[]:{};for(j=0;j<e;j++)h=c[j],h instanceof this.constructor&&(h=h.toObject()),k?a.push(h):(g=b[j],a[g]=h);return a}};o=Va;var Wa,hb=function(a){delete window[a];a=document.getElementById(a);a.parentNode.removeChild(a)},ib=function(a,b,c){var d=[],a=f.uri.parse(a),e=f.uri.parseQuery(a.query),j=f.uniqueId("callback");e.callback=j;for(var g in e)e.hasOwnProperty(g)&&d.push(g+"="+e[g]);var a=(a.scheme?a.scheme+"://":"")+(a.authority?a.authority:"")+(a.path?a.path:"")+(d.length?"?"+d.join("&"):"")+(a.fragment?"#"+a.fragment:""),h=hb.bind(this,j);window[j]=function(a){h();b(a)};d=document.createElement("script");d.setAttribute("id",j);d.setAttribute("src",a);d.setAttribute("type","text/javascript");d.onerror=function(){h();c()};document.getElementsByTagName("head")[0].appendChild(d)},Xa=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];Wa=function(a,b,c,d,e){if(e)ib(a,b,c,d);else{for(var j,e=!1,g=0;g<Xa.length;g++){try{e=Xa[g]()}catch(h){continue}break}if(j=e){f.isObject(d)||(d={});var g=d.hasOwnProperty("method")&&f.isString(d.method)&&d.method||"GET",k=d.hasOwnProperty("headers")&&f.isObject(d.headers)&&d.headers||{},e=null;d.hasOwnProperty("data")&&!f.isUndefined(d.data)&&(e=d.data,f.isObject(e)||(e=""+e));try{j.open(g,a,!0);for(var l in k)k.hasOwnProperty(l)&&j.setRequestHeader(l,k[l]);j.onreadystatechange=function(){if(4===j.readyState){var a=j.status;if(399<a&&600>a)return c();b(j.responseText)}};if(f.isObject(e)){var a=[],m;for(m in e)e.hasOwnProperty(m)&&a.push(m+"="+encodeURIComponent(e[m]));e=a.join("&");j.setRequestHeader("Content-type","application/x-www-form-urlencoded")}j.send(e)}catch(n){c()}}else c()}};var Ya,jb=function(a,b,c,d,e,j){if(300<j.statusCode&&400>j.statusCode&&j.headers.location)return j=f.uri.parse(j.headers.location),j.authority||(j.authority=a.authority),Za((j.scheme?j.scheme+"://":"")+(j.authority?j.authority:"")+(j.path?j.path:"")+(j.query?"?"+j.query:"")+(j.fragment?"#"+j.fragment:""),b,c,d,e);var g="";j.on("end",function(){b(g)});j.on("data",function(a){g+=a})},kb=function(a,b,c,d,e){var j="",g=a.query;f.isObject(d)||(d={});e&&(g&&(g+="&"),g=g+"callback="+f.uniqueId("callback"));g&&(g="?"+g);g={host:a.authority,path:a.path+g,method:d.hasOwnProperty("method")&&f.isString(d.method)&&d.method||"GET",headers:d.hasOwnProperty("headers")&&f.isObject(d.headers)&&d.headers||{}};if(d.hasOwnProperty("data")&&!f.isUndefined(d.data))if(j=d.data,f.isObject(j)){var h=[],k;for(k in j)j.hasOwnProperty(k)&&h.push(k+"="+encodeURIComponent(j[k]));j=h.join("&");g.headers["Content-type"]="application/x-www-form-urlencoded"}else j=""+j;k=("http"===a.scheme&&($a=$a||require("http"))||"https"===a.scheme&&(ab=ab||require("https"))).request(g,Function.prototype.bind.apply(jb,Array.prototype.concat.apply(this,arguments)));k.on("error",function(){c()});k.write(j);k.end()},Za=function(a,b,c,d,e){var g=f.uri.parse(a);try{"http"===g.scheme||"https"===g.scheme?kb(g,b,c,d,e):""===g.scheme?(ia=ia||require("fs"),ia.readFile(a,function(a,d){if(a)return c();b(d.toString())})):c()}catch(h){c()}},ia=null,$a=null,ab=null;Ya=Za;var lb=function(a,b,c){var d=f.uri.parse(a);try{if("http"===d.scheme||"https"===d.scheme){var e=readUrl(a);b(e)}else""===d.scheme?(e=readFile(a),b(e)):c()}catch(g){c()}},u=function(a){switch(f.getBaseType(a)){case f.T_BOOLEAN:return a;case f.T_NUMBER:return 0!==a;case f.T_STRING:return 0<a.length;case f.T_OBJECT:return a instanceof o;default:return!1}},s=function(a){switch(f.getBaseType(a)){case f.T_UNDEFINED:return"";case f.T_NULL:case f.T_STRING:case f.T_BOOLEAN:return""+a;case f.T_NUMBER:a=(""+a).toLowerCase();if(-1===a.indexOf("e"))return a;var a=a.split("e"),b=a[0],c=a[1],a=b[0],d=c[0];"+"===a||"-"===a?b=b.substr(1):a="";"+"===d||"-"===d?c=c.substr(1):d="+";var e,g;e=b.indexOf(".");-1===e?(g=0,e=b.length):(g=b.substr(e+1).length,e=b.substr(0,e).length,b=b.replace(/\./g,""));e=c-e;"+"===d&&(e=c-g);g="";for(c=0;c<e;c++)g+="0";return"+"===d?a+b+g:a+"0."+g+b}if(f.isObject(a)&&a instanceof o){b=[];d=a.values();for(c=0;c<d.length;c++)a=d[c],f.isUndefined(a)||b.push(s(a));return b.join(" ")}return""},ja=function(a){if(f.isString(a)&&a.match(/^\s*\[\s*\[\s*"HISTONE"/))try{a=JSON.parse(a)}catch(b){}return a},Q=function(a,b,c,d,e){try{if(f.isFunction(ka)&&!0===ka(a,b,function(b,d){f.isString(d)||(d=a);c(b,d)},d))return}catch(g){}var h=f.uri.resolve(a,b);la.hasOwnProperty(h)?
c(la[h],h):bb(h,function(a){a=c(a,h);f.isUndefined(a)||(la[h]=a)},function(){c(void 0,h)},d,e)},q=function(a){if(!f.isFunction(a)){if(!f.isObject(a)||a instanceof o)return a;var b=new o,c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.set(c,q(a[c]));return b}},ma=function(a){if(f.isObject(a)){if(a instanceof o)return a.toObject();for(var b in a)a[b]=ma(a[b])}return a},cb=function(a,b,c){var d=a;switch(f.getBaseType(a)){case f.T_NULL:d=m.Type;break;case f.T_BOOLEAN:d=m.Type;break;case f.T_UNDEFINED:d=m.Type;break;case f.T_NUMBER:d=m.Number;break;case f.T_STRING:d=m.String}f.isObject(a)&&a instanceof o&&(d=m.Map);if(Object.prototype.hasOwnProperty.call(d,b))return d[b];if(m.Type.hasOwnProperty(b))return m.Type[b];if(c&&d.hasOwnProperty(""))return d[""]},J=function(a,b,c,d){var e,g;f.forEachAsync(b,function(b,d){l(b,c,function(b){e=a;if(g=cb(a,b,!0))if(f.isFunction(g))try{g.call(c,e,[b],function(b){a=q(b);d()})}catch(h){a=void 0,d()}else a=q(g),d();else return a=void 0,d(!0)})},function(){d(a)})},db=function(a,b,c,d){var e=a[0],f=a[1],a=a[2],g=c.getBaseURI(),h={arguments:b};c.save();c.setBaseURI(a);c.putVar("self",q(h));a=0;for(h=Math.min(b.length,e.length);a<h;a++)c.putVar(e[a],q(b[a]));return D(f,c,function(a){c.setBaseURI(g);c.restore();d(a)})},l=function(a,b,c){if(!f.isArray(a))return c(a);var d=a[0];switch(d){case h.T_INT:case h.T_STRING:case h.T_DOUBLE:c(a[1]);break;case h.T_SELECTOR:var a=a[1],e,g=a.slice(1),n=a[0];f.isString(n)?"global"===n?J(m.Global,g,b,c):"this"===n?J(b.context,g,b,c):b.getVar(n,function(a,d){if(d)return J(a,g,b,c);if(m.Global.hasOwnProperty(n))return J(m.Global,[n].concat(g),b,c);e=b.context;if(f.isObject(e)&&e instanceof o&&e.hasKey(n))return J(e,[n].concat(g),b,c);J(void 0,g,b,c)}):l(n,b,function(a){J(a,g,b,c)});break;case h.T_VAR:var p=a[1],a=a[2];b.save();l(a,b,function(a){b.restore();b.putVar(p,a);c("")});break;case h.T_IF:var k="";f.forEachAsync(a[1],function(a,c){l(a[0],b,function(d){if(!u(d))return c();b.save();D(a[1],b,function(a){k=a;b.restore();c(!0)})})},function(){c(k)});break;case h.T_CALL:var r=a[1],t=a[3];l(a[2],b,function(a){var d=[];f.isArray(t)||(t=[]);f.forEachAsync(t,function(a,c){l(a,b,function(a){d.push(a);c()})},function(){var e=null;if(f.isNull(r)){if(e=b.getMacro(a))return db(e,d,b,c);r=m.Global}l(r,b,function(g){if(e=cb(g,a))if(f.isFunction(e))try{e.call(b,g,ma(d),function(a){c(q(a))})}catch(i){c()}else c(q(e));else return c()})})});break;case h.T_TERNARY:var y=a[2],w=a[3];l(a[1],b,function(a){u(a)?l(y,b,c):w?l(w,b,c):c()});break;case h.T_IMPORT:var a=a[1],z=b.getBaseURI();b.imports||(b.imports={});var A=a+"#"+z;b.imports.hasOwnProperty(A)?c():(b.imports[A]=!0,Q(a,z,function(a,d){try{a=ja(a);a=m(a,d);b.setBaseURI(d);var e=a.getAST();D(e[1],b,function(){b.setBaseURI(z);c("")});return a}catch(f){c()}}));break;case h.T_EQUAL:case h.T_NOT_EQUAL:var C=a[2];l(a[1],b,function(a){l(C,b,function(b){f.isString(a)&&f.isNumber(b)?f.isNumeric(a)?b=s(b):a=parseFloat(a,10):f.isNumber(a)&&f.isString(b)&&(f.isNumeric(b)?a=s(a):b=parseFloat(b,10));if(!f.isString(a)||!f.isString(b))f.isNumber(a)&&f.isNumber(b)?(a=parseFloat(a),b=parseFloat(b)):(a=u(a),b=u(b));b=a===b;c(d===h.T_EQUAL?b:!b)})});break;case h.T_STATEMENTS:D(a[1],b,c);break;case h.T_MACRO:b.putMacro(a[1],a[2],a[3],b.getBaseURI());c("");break;case h.T_MAP:var a=a[1],v=new o;f.forEachAsync(a,function(a,c){l(a[1],b,function(b){v.set(a[0],b);c()})},function(){c(v)});break;case h.T_ADD:var E=a[2];l(a[1],b,function(a){l(E,b,function(b){if(!f.isString(a)&&!f.isString(b)){if(f.isNumber(a)||f.isNumber(b)){f.isNumeric(a)&&(a=parseFloat(a,10));if(!f.isNumber(a))return c();f.isNumeric(b)&&(b=parseFloat(b,10));return!f.isNumber(b)?c():c(a+b)}if(a instanceof o&&b instanceof o){var d=a.clone(),d=d.concat(b);return c(d)}}a=s(a);b=s(b);c(a+b)})});break;case h.T_FOR:var B=a[1],G=a[3];l(a[2],b,function(a){if(a instanceof o&&a.length()){var d="",e,g=a.keys(),a=a.values();f.forEachAsync(a,function(a,c,f,i,h){b.save();b.putVar(B[0],q(a));B[1]&&b.putVar(B[1],g[i]);e={last:h,index:i};b.putVar("self",q(e));D(G[0],b,function(a){d+=a;b.restore();c()})},function(){c(d)})}else G[1]?(b.save(),D(G[1],b,function(a){b.restore();c(a)})):c("")});break;case h.T_TRUE:c(!0);break;case h.T_FALSE:c(!1);break;case h.T_OR:var x=a[2];l(a[1],b,function(a){u(a)?c(a):l(x,b,c)});break;case h.T_AND:var F=a[2];l(a[1],b,function(a){u(a)?l(F,b,c):c(a)});break;case h.T_NULL:c(null);break;case h.T_NOT:l(a[1],b,function(a){c(!u(a))});break;case h.T_SUB:case h.T_MUL:case h.T_DIV:case h.T_MOD:case h.T_NEGATE:var H=a[2];l(a[1],b,function(a){f.isNumeric(a)&&(a=parseFloat(a,10));if(!f.isNumber(a))return c();if(d===h.T_NEGATE)return c(-a);l(H,b,function(b){f.isNumeric(b)&&(b=parseFloat(b,10));if(!f.isNumber(b))return c();switch(d){case h.T_SUB:c(a-b);break;case h.T_MUL:c(a*b);break;case h.T_DIV:c(a/b);break;case h.T_MOD:c(a%b)}})});break;case h.T_LESS_THAN:case h.T_GREATER_THAN:case h.T_LESS_OR_EQUAL:case h.T_GREATER_OR_EQUAL:var I=a[2];l(a[1],b,function(a){l(I,b,function(b){f.isString(a)&&f.isNumber(b)?f.isNumeric(a)?a=parseFloat(a,10):b=s(b):f.isNumber(a)&&f.isString(b)&&(f.isNumeric(b)?b=parseFloat(b,10):a=s(a));if(!f.isNumber(a)||!f.isNumber(b))f.isString(a)&&f.isString(b)?(a=a.length,b=b.length):(a=u(a),b=u(b));switch(d){case h.T_LESS_THAN:c(a<b);break;case h.T_GREATER_THAN:c(a>b);break;case h.T_LESS_OR_EQUAL:c(a<=b);break;case h.T_GREATER_OR_EQUAL:c(a>=b)}})});break;default:throw c(),'unsupported template instruction "'+s(a)+'"';}},D=function(a,b,c){var d="";f.forEachAsync(a,function(a,c){f.isArray(a)?l(a,b,function(a){d+=s(a);c()}):(d+=a,c())},function(){c(d)})},eb=function(a,b){f.isString(b)||(b=".");this.getAST=function(){return a};this.render=function(c,d){var d=q(d),e=new r(d);e.setBaseURI(b);D(a[1],e,c)};this.call=function(c,d,e,f){var g=new r(f),f=q(f);g.setBaseURI(b);D(a[1],g,function(){var a=g.getMacro(c);if(!a)return e();db(a,d,g,function(a){e(ma(a))})})}},la={},ka=null,na=null,R=f.getEnvType(),mb="javascript/"+R,nb=f.getEnvInfo(),bb="node"===R&&Ya||"rhino"===R&&lb||"browser"===R&&Wa,m=function(a,b){if(f.isString(a))na||(na=new h),a=na.parse(a,b);else{if(a instanceof eb)return a;if(f.isDOMElement(a))return m(a.text||a.textContent,b);if(!f.isArray(a))throw'"'+a+'" is not a string';}return new eb(a,b)};m.OrderedMap=o;m.Type={isUndefined:function(a,b,c){c(f.isUndefined(a))},isNull:function(a,b,c){c(f.isNull(a))},isBoolean:function(a,b,c){c(f.isBoolean(a))},isNumber:function(a,b,c){c(f.isNumber(a))},isString:function(a,b,c){c(f.isString(a))},isMap:function(a,b,c){c(f.isObject(a)&&a instanceof o)},toJSON:function(a,b,c){if(f.isUndefined(a))return c("null");c(JSON.stringify(a))},toMap:function(a,b,c){if(a instanceof o)return c(a);c((new o).set(null,a))},toString:function(a,b,c){c(s(a))},toBoolean:function(a,b,c){c(u(a))}};m.Number={isInteger:function(a,b,c){c(0===a%1)},isFloat:function(a,b,c){c(0!==a%1)},toChar:function(a,b,c){c(String.fromCharCode(a))},toFixed:function(a,b,c){b=b[0];f.isNumber(b)&&0<=b?(b=Math.pow(10,b||0),c(Math.round(a*b)/b)):c(a)},abs:function(a,b,c){c(Math.abs(a))},floor:function(a,b,c){c(Math.floor(a))},ceil:function(a,b,c){c(Math.ceil(a))},round:function(a,b,c){c(Math.round(a))},pow:function(a,b,c){b=b[0];if(!f.isNumber(b))return c();a=Math.pow(a,b);if(isNaN(a))return c();c(a)},log:function(a,b,c){if(0>=a)return c();b=b[0];a=f.isNumber(b)&&0<b?Math.log(a)/Math.log(b):Math.log(a);if(isNaN(a)||!isFinite(a))return c();c(a)}};m.String={"":function(a,b,c){b=parseFloat(b[0],10);if(isNaN(b))return c();var d=a.length;0>b&&(b=d+b);if(0!==b%1||0>b||b>=d)return c();c(a[b])},size:function(a,b,c){c(a.length)},strip:function(a,b,c){for(var d="",e;b.length;)e=b.shift(),f.isString(e)&&(d+=e);0===d.length&&(d=" \n\r\t");b=-1;for(e=a.length;b<e&&-1!==d.indexOf(a.charAt(++b)););for(;0<=e&&-1!==d.indexOf(a.charAt(--e)););c(a.slice(b,e+1))},slice:function(a,b,c){var d=b[0],b=b[1],e=a.length;f.isNumber(d)||(d=0);0>d&&(d=e+d);0>d&&(d=0);d<e?(f.isNumber(b)||(b=0),0===b&&(b=e-d),0>b&&(b=e-d+b),0>=b?c(""):c(a.substr(d,b))):c("")},test:function(a,b,c){b=b[0];c(f.isString(b)&&null!==a.match(b))},match:function(a,b,c){b=b[0];if(!f.isString(b))return c(!1);a=a.match(b);if(f.isNull(a))return c(!1);c(Array.prototype.slice.call(a,0))},toLowerCase:function(a,b,c){c(a.toLowerCase())},toUpperCase:function(a,b,c){c(a.toUpperCase())},split:function(a,b,c){b=b[0];c(a.split(f.isString(b)?b:""))},charCodeAt:function(a,b,c){b=parseFloat(b[0],10);if(isNaN(b))return c();var d=a.length;0>b&&(b=d+b);if(0!==b%1||0>b||b>=d)return c();c(a.charCodeAt(b))},toNumber:function(a,b,c){f.isNumeric(a)?c(parseFloat(a,10)):c()}};m.Map={"":function(a,b,c){c(a.get(b[0]))},size:function(a,b,c){c(a.length())},join:function(a,b,c){c(a.join(b[0]))},keys:function(a,b,c){c(a.keys())},values:function(a,b,c){c(a.values())},hasKey:function(a,b,c){c(a.hasKey(b[0]))},remove:function(a,b,c){for(var d=a.clone();b.length;)a=b.shift(),d.remove(a);c(d)},slice:function(a,b,c){var d=b[0],b=b[1],a=a.clone();a.slice(d,b);c(a)},toQueryString:function(a,b,c){var d,e=[],g=b[0],h=b[1],a=a.toObject(),a=f.objectFlatten(a);f.isString(g)||(g="");f.isString(h)||(h="&");if(f.isArray(a))for(d=0;d<a.length;d++)b=a[d],f.isUndefined(b)||(b=s(b),b=encodeURIComponent(b),e.push(g+d+"="+b));else if(f.isObject(a))for(d in a)a.hasOwnProperty(d)&&(b=a[d],f.isUndefined(b)||(b=s(b),b=encodeURIComponent(b),f.isNumeric(d)&&(d=g+d),e.push(d+"="+b)));c(e.join(h))},toJSON:function(a,b,c){c(JSON.stringify(a.toObject()))}};m.Global={clientType:mb,userAgent:nb,baseURI:function(a,b,c){c(this.getBaseURI())},resolveURI:function(a,b,c){c(f.uri.resolve(b[0],b[1]))},isMap:function(a,b,c){c(!0)},uniqueId:function(a,b,c){c(f.uniqueId())},loadJSON:function(a,b,c){var a=b.shift(),d=!f.isBoolean(b[0])&&b.shift(),e=f.isBoolean(b[0])&&b[0],b=this.getBaseURI();Q(a,b,function(a){if(!f.isString(a))return a=q(a),c(a);e&&(a=a.replace(/^\s*[$A-Z_][0-9A-Z_$]*\(\s*/i,""),a=a.replace(/\s*\);?\s*$/,""));try{a=JSON.parse(a),a=q(a),c(a)}catch(b){c()}},d,e)},loadText:function(a,
b,c){var a=b[0],b=b[1],d=this.getBaseURI();Q(a,d,function(a){c(f.isString(a)?a:void 0)},b)},include:function(a,b,c){var a=b[0],d=b[1],b=this.getBaseURI();Q(a,b,function(a,b){try{return a=ja(a),a=m(a,b),a.render(c,q(d)),a}catch(e){c()}})},rand:function(a,b,c){a=parseFloat(b[0]);b=parseFloat(b[1]);if(!f.isNumber(a)||0!==a%1)a=0;if(!f.isNumber(b)||0!==b%1)b=Math.pow(2,32)-1;c(Math.floor(Math.random()*(b-a+1))+a)},min:function(a,b,c){for(var a=b.length,d=void 0,e=0;e<a;e++)if(f.isNumber(b[e])&&(f.isUndefined(d)||b[e]<d))d=b[e];c(d)},max:function(a,b,c){for(var a=b.length,d=void 0,e=0;e<a;e++)if(f.isNumber(b[e])&&(f.isUndefined(d)||b[e]>d))d=b[e];c(d)},range:function(a,b,c){var a=[],d=parseFloat(b[0]),b=parseFloat(b[1]);if(!f.isNumber(d)||!f.isNumber(b)||0!==d%1||0!==b%1)return c();if(d>b)for(;d>=b;d-=1)a.push(d);else if(d<b)for(;d<=b;d+=1)a.push(d);else a.push(d);c(a)},dayOfWeek:function(a,b,c){var a=parseFloat(b[0]),d=parseFloat(b[1]),b=parseFloat(b[2]);if(!f.isNumber(a)||!f.isNumber(d)||!f.isNumber(b)||0!==a%1||0!==d%1||0!==b%1)return c();var e=new Date(a,d-=1,b);e.getFullYear()==a&&e.getMonth()==d&&e.getDate()==b?(b=e.getDay(),c(b?b:7)):c()},daysInMonth:function(a,b,c){a=parseFloat(b[0]);b=parseFloat(b[1]);if(!f.isNumber(a)||!f.isNumber(b)||0!==a%1||0!==b%1||1>b||12<b)return c();c((new Date(a,b,0)).getDate())}};m.load=function(a,b,c){var d=b.toUrl(a),d=f.uri.resolve(d,window.location.href);bb(d,function(a){a=ja(a);c(m(a,d))},null)};m.setURIResolver=function(a){ka=f.isFunction(a)?a:null};return m},"Histone",function(){return this}.call(null));